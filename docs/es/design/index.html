
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Diseño de LFortran &#8212; LFortran</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/ansi.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/translations.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/lfortran-logo.svg"/>
    <link rel="index" title="Índice" href="../genindex/" />
    <link rel="search" title="Búsqueda" href="../search/" />
    <link rel="next" title="Tutorial para desarrolladores" href="../developer_tutorial/" />
    <link rel="prev" title="Estado del desarrollo de LFortran" href="../progress/" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=amber data-md-color-accent=orange>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#design" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../" title="LFortran"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/lfortran-logo.svg" height="26"
                   alt="LFortran logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">LFortran Documentation</span>
          <span class="md-header-nav__topic"> Diseño de LFortran </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search/" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/lfortran/lfortran" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LFortran
  </div>
</a>
          </div>
        </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Versions</button>
    <div class="dropdown-content md-hero">
          <a title="English" href="/../en/">English</a>
      
          <a title="Bengali" href="/../bn/">Bengali</a>
      
          <a title="Czech" href="/../cs/">Czech</a>
      
          <a title="German" href="/../de/">German</a>
      
          <a title="Spanish" href="/../es/">Spanish</a>
      
          <a title="French" href="/../fr/">French</a>
      
          <a title="Japanese" href="/../ja/">Japanese</a>
      
          <a title="Dutch" href="/../nl/">Dutch</a>
      
          <a title="Polish" href="/../pl/">Polish</a>
      
          <a title="Portuguese" href="/../pt/">Portuguese</a>
      
          <a title="Russian" href="/../ru/">Russian</a>
      
          <a title="Chinese" href="/../zh_CN/">Chinese</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../" class="md-tabs__link">LFortran</a></li>
            
            <li class="md-tabs__item"><a href="../installation/" class="md-tabs__link">Getting started</a></li>
            
            <li class="md-tabs__item"><a href="../progress/" class="md-tabs__link">LFortran Development Status</a></li>
            
            <li class="md-tabs__item"><a href="#" class="md-tabs__link">Developers's Guide</a></li>
            
            <li class="md-tabs__item"><a href="../intrinsics/array/" class="md-tabs__link">Intrinsics</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../" title="LFortran" class="md-nav__button md-logo">
      
        <img src="../_static/lfortran-logo.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../"
       title="LFortran">LFortran Documentation</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/lfortran/lfortran" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LFortran
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Primeros pasos</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation/" class="md-nav__link">Instalación</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../language/" class="md-nav__link">Fortran Language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../usage/" class="md-nav__link">LFortran User Guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Estado del desarrollo de LFortran</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../progress/" class="md-nav__link">Estado del desarrollo de LFortran</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../progress/#topics" class="md-nav__link">Topics</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Guía del desarrollador</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Diseño de LFortran </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Diseño de LFortran</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#design--page-root" class="md-nav__link">Diseño de LFortran</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#high-level-overview" class="md-nav__link">Descripción general de alto nivel</a>
        </li>
        <li class="md-nav__item"><a href="#asr-design-details" class="md-nav__link">Detalles de diseño de una ASR</a>
        </li>
        <li class="md-nav__item"><a href="#compilation-modes" class="md-nav__link">Compilation Modes</a>
        </li>
        <li class="md-nav__item"><a href="#notes" class="md-nav__link">Notas:</a>
        </li>
        <li class="md-nav__item"><a href="#fortran-2008" class="md-nav__link">Fortran 2008</a>
        </li>
        <li class="md-nav__item"><a href="#lfortran-extension" class="md-nav__link">Extensión LFortran</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#example-1" class="md-nav__link">Ejemplo 1</a>
        </li>
        <li class="md-nav__item"><a href="#example-2" class="md-nav__link">Ejemplo 2</a>
        </li>
        <li class="md-nav__item"><a href="#example-3" class="md-nav__link">Ejemplo 3</a>
        </li>
        <li class="md-nav__item"><a href="#example-4" class="md-nav__link">Ejemplo 4</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#design-considerations" class="md-nav__link">Consideraciones de diseño</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#high-level-overview" class="md-nav__link">Descripción general de alto nivel</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#asr-design-details" class="md-nav__link">Detalles de diseño de una ASR</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#compilation-modes" class="md-nav__link">Compilation Modes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#notes" class="md-nav__link">Notas:</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#fortran-2008" class="md-nav__link">Fortran 2008</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#lfortran-extension" class="md-nav__link">Extensión LFortran</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#design-considerations" class="md-nav__link">Consideraciones de diseño</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../developer_tutorial/" class="md-nav__link">Tutorial para desarrolladores</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../ast_and_asr/" class="md-nav__link">Diferencias entre un AST y una ASR</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../contributing/" class="md-nav__link">Contribuyendo</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Intrínsecos de LFortran</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../intrinsics/array/" class="md-nav__link">Funciones intrínsecas de matriz</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../intrinsics/bit/" class="md-nav__link">Funciones intrínsecas de bits</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../intrinsics/character/" class="md-nav__link">Funciones intrínsecas de carácter</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../intrinsics/kind-type/" class="md-nav__link">Kind Type Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../intrinsics/mathematical/" class="md-nav__link">Mathematical Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../intrinsics/numeric/" class="md-nav__link">Numeric Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../intrinsics/misc/" class="md-nav__link">Miscellaneous Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">LFortran ASR Nodes</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr/asr_nodes/cast_kind_nodes/cast_kind/" class="md-nav__link">cast_kind</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr/asr_nodes/expression_nodes/expression_nodes/" class="md-nav__link">ASR Expression Nodes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr/asr_nodes/kinds_nodes/kinds/" class="md-nav__link">kinds</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr/asr_nodes/statement_nodes/statement_nodes/" class="md-nav__link">ASR Statement Nodes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr/asr_nodes/symbol_nodes/symbol_nodes/" class="md-nav__link">ASR Symbol Nodes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr/asr_nodes/type_nodes/ttype/" class="md-nav__link">ttype</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr/asr_nodes/omp_nodes/omp_nodes/" class="md-nav__link">ASR OpenMp Nodes</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#design--page-root" class="md-nav__link">Diseño de LFortran</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#high-level-overview" class="md-nav__link">Descripción general de alto nivel</a>
        </li>
        <li class="md-nav__item"><a href="#asr-design-details" class="md-nav__link">Detalles de diseño de una ASR</a>
        </li>
        <li class="md-nav__item"><a href="#compilation-modes" class="md-nav__link">Compilation Modes</a>
        </li>
        <li class="md-nav__item"><a href="#notes" class="md-nav__link">Notas:</a>
        </li>
        <li class="md-nav__item"><a href="#fortran-2008" class="md-nav__link">Fortran 2008</a>
        </li>
        <li class="md-nav__item"><a href="#lfortran-extension" class="md-nav__link">Extensión LFortran</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#example-1" class="md-nav__link">Ejemplo 1</a>
        </li>
        <li class="md-nav__item"><a href="#example-2" class="md-nav__link">Ejemplo 2</a>
        </li>
        <li class="md-nav__item"><a href="#example-3" class="md-nav__link">Ejemplo 3</a>
        </li>
        <li class="md-nav__item"><a href="#example-4" class="md-nav__link">Ejemplo 4</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#design-considerations" class="md-nav__link">Consideraciones de diseño</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="lfortran-design">
<h1 id="design--page-root">Diseño de LFortran<a class="headerlink" href="#design--page-root" title="Enlazar permanentemente con este título">¶</a></h1>
<section id="high-level-overview">
<h2 id="high-level-overview">Descripción general de alto nivel<a class="headerlink" href="#high-level-overview" title="Enlazar permanentemente con este título">¶</a></h2>
<p>LFortran está estructurado en torno a dos módulos independientes, AST y ASR, los cuales son independientes (completamente independientes del resto de LFortran) y se anima a los usuarios a usarlos de forma independiente para otras aplicaciones y crear herramientas en la parte superior:</p>
<ul class="simple">
<li><p>Árbol de sintaxis abstracta (AST), módulo <code class="docutils literal notranslate"><span class="pre">lfortran.ast</span></code>: representa cualquier código fuente de Fortran, basado estrictamente en la sintaxis, no se incluye semántica. El módulo AST puede convertirse en código fuente de Fortran.</p></li>
<li><p>Representación semántica abstracta (ASR), módulo <code class="docutils literal notranslate"><span class="pre">lfortran.asr</span></code>: Representa un código fuente de Fortran válido, se incluye toda la semántica. No se permite el código Fortran no válido (se dará un error). El módulo ASR puede convertirse en un AST.</p></li>
</ul>
<p>El compilador LFortran está compuesto por las siguientes etapas independientes:</p>
<ul class="simple">
<li><p>Análisis: convierte el código fuente de Fortran en un AST</p></li>
<li><p>Semántica: Convertir un AST para un ASR</p></li>
<li><p>Optimización de alto nivel: optimizar ASR para un ASR posiblemente mas simple y mas rápido (cosas como alinear funciones, eliminar expresiones o declaraciones redundantes, etc.)</p></li>
<li><p>Generación de código LLVM IR y optimizaciones de nivel inferior: convierte un ASR en un LLVM IR. Esta etapa también realiza todas las demás optimizaciones que no producen un ASR, pero que aún tiene sentido antes de pasar a LLVM IR.</p></li>
<li><p>Generación de código de máquina: LLVM luego realiza todas sus optimizaciones y genera código de máquina (como un ejecutable binario, una biblioteca, un archivo de objeto, o se carga y ejecuta usando JIT como parte de la sesión interactiva de LFortran o en un núcleo de Jupyter).</p></li>
</ul>
<p>LFortran está estructurado como una biblioteca, por lo que, por ejemplo, se puede usar el analizador para obtener un AST y hacer algo con él, o se puede usar el analizador semántico para obtener ASR y hacer algo con él. Uno puede generar la ASR directamente (por ejemplo, desde SymPy) y luego convertirlo a AST y a un código fuente de Fortran, o usar LFortran para compilarlo en código de máquina directamente. En otras palabras, uno puede usar LFortran para convertir fácilmente entre las tres representaciones equivalentes:</p>
<ul class="simple">
<li><p>Código fuente de Fortran</p></li>
<li><p>Árbol de sintaxis abstracta (AST)</p></li>
<li><p>Representación semántica abstracta (ASR)</p></li>
</ul>
<p>Estos son todos equivalentes en el siguiente sentido:</p>
<ul class="simple">
<li><p>Cualquier ASR puede siempre ser convertido a un AST equivalente</p></li>
<li><p>Cualquier AST puede ser siempre convertido a un código fuente Fortran equivalente</p></li>
<li><p>Cualquier código fuente de Fortran siempre se puede convertir a un AST equivalente o se obtiene un error de sintaxis</p></li>
<li><p>Cualquier AST siempre se puede convertir a un ASR equivalente o se obtiene un error semántico</p></li>
</ul>
<p>Así, cuando se puede realizar una conversión estos son equivalentes, y la conversión siempre se puede realizar a menos que el código no sea válido.</p>
</section>
<section id="asr-design-details">
<h2 id="asr-design-details">Detalles de diseño de una ASR<a class="headerlink" href="#asr-design-details" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Una ASR está diseñada para tener las características siguientes:</p>
<ul class="simple">
<li><p>Una ASR sigue siendo semánticamente equivalente al código Fortran original (esta no pierde información semántica). Una ASR puede ser convertida a un AST, y un AST a un código fuente Fortran que es funcionalmente equivalente al original.</p></li>
<li><p>Una ASR es lo más simple posible: no contiene ninguna información que no pueda deducirse de una ASR.</p></li>
<li><p>Las clases ASR C++ (en el futuro) están diseñadas de manera similar a SymEngine: se construyen una vez y luego son inmutables. El constructor verifica en modo depuración que se cumplan todos los requisitos (por ejemplo, que todas las variables en una función tengan un conjunto de argumentos ficticios, que las matrices de forma explícita no se puedan asignar y todos los demás requisitos de Fortran para que sea un código válido), pero en modo de lanzamiento, construye rápidamente la clase sin controles. Luego, hay clases de constructores que construyen las clases ASR C++ para cumplir con los requisitos (verificados en el modo de depuración) y el constructor da un mensaje de error si un código no es un código Fortran válido, y si no da un mensaje de error, entonces las clases ASR C++ están construidas correctamente. Así, por construcción, las clases ASR siempre contienen código Fortran válido y el resto de LFortran puede depender de él.</p></li>
</ul>
</section>
<section id="compilation-modes">
<h2 id="compilation-modes">Compilation Modes<a class="headerlink" href="#compilation-modes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>We support two compilation modes:</p>
<ol class="arabic simple">
<li><p>Monolithic Compilation Mode: The standard compilation mode.
In this mode, LFortran produces empty object files (<code class="docutils literal notranslate"><span class="pre">.o</span></code> files) with <code class="docutils literal notranslate"><span class="pre">-c</span></code> flag (the only reason to produce those is to satisfy existing build systems that typically expect <code class="docutils literal notranslate"><span class="pre">.o</span></code> files to be created). The object code is generated only when main program is encountered: all modules are loaded from <code class="docutils literal notranslate"><span class="pre">.mod</span></code> files and everything compiled and linked at once. When a module is compiled, only a <code class="docutils literal notranslate"><span class="pre">.mod</span></code> file is generated with full code. For files with global procedures, LFortran identifies those automatically and sets <code class="docutils literal notranslate"><span class="pre">generate_code_for_global_procedures</span></code> compiler option to <code class="docutils literal notranslate"><span class="pre">true</span></code> (not exposed to user), which then generates object code only for global procedures (you must thus link these generated <code class="docutils literal notranslate"><span class="pre">.o</span></code> object files with the main program), and rest of the modules are serialized to <code class="docutils literal notranslate"><span class="pre">.mod</span></code> files which do not contain global procedure.</p></li>
<li><p>Separate Compilation Mode: This mode is enabled with <code class="docutils literal notranslate"><span class="pre">--separate-compilation</span></code> flag. In this mode, LFortran generates full code for each file into object files (<code class="docutils literal notranslate"><span class="pre">.o</span></code> files) with full symbol information. This
is usually the default mode used by most other Fortran compilers. We create object code, and we still create <code class="docutils literal notranslate"><span class="pre">.mod</span></code> files for modules and they contain everything just like for direct mode but when any <code class="docutils literal notranslate"><span class="pre">.mod</span></code> file is loaded, we change all symbols to <code class="docutils literal notranslate"><span class="pre">ExternalUndefined</span></code> ABI. We don’t change the ABI for <code class="docutils literal notranslate"><span class="pre">bind(c)</span></code> (since those are undefined already in object code, the user is responsible to provide an implementation at link time).</p></li>
</ol>
<p>Note: <strong><em>If you enable separate compilation mode, you have to enable it for all the files.</em></strong></p>
</section>
<section id="notes">
<h2 id="notes">Notas:<a class="headerlink" href="#notes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Información que se pierde al analizar la fuente en un AST: espacios en blanco, distinción de declaración if de varias líneas/una sola línea, distinción entre mayúsculas y minúsculas de palabras clave.</p>
<p>Información que se pierde al pasar de un AST a una ASR: sintaxis detallada, cómo se definieron las variables y el orden de los atributos de tipo (si la dimensión de matriz usa el atributo <code class="docutils literal notranslate"><span class="pre">dimensión</span></code> o paréntesis en la variable, o cuántas variables hay por línea de declaración o su orden), ya que una ASR solo representa la información de tipo agregada en la tabla de símbolos.</p>
<p>Una ASR es la forma más sencilla de generar código Fortran, ya que uno no tiene que preocuparse por la sintaxis detallada (como en un AST) sobre cómo y dónde se declaran las cosas. Uno especifica la tabla de símbolos para un módulo, luego para cada símbolo (funciones, variables globales, tipos, …) uno especifica las variables locales y si se trata de una interfaz, entonces uno necesita especificar dónde puede encontrar una implementación, de lo contrario un cuerpo se suministra con declaraciones, esos nodos son casi los mismos que en un AST, excepto que cada variable es solo una referencia a un símbolo en la tabla de símbolos (por lo que, por construcción, uno no puede tener variables indefinidas). La tabla de símbolos para cada nodo, como Función o Módulo, también hace referencia a su padre (por ejemplo, una función hace referencia a un módulo, un módulo hace referencia al ámbito global).</p>
<p>Una ASR se puede convertir directamente en un AST sin recopilar ninguna otra información. Y un AST directamente al código fuente de Fortran.</p>
<p>Una ASR siempre representa un código Fortran semánticamente válido. Esto se aplica mediante comprobaciones en los constructores de una ASR C++ (en la compilación de depuración). Cuando se utiliza una ASR, se puede suponer que es válido.</p>
</section>
<section id="fortran-2008">
<h2 id="fortran-2008">Fortran 2008<a class="headerlink" href="#fortran-2008" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Fortran 2008 <a class="reference external" href="https://j3-fortran.org/doc/year/10/10-007.pdf">estándar</a> capítulo 2 «Conceptos de Fortran» especifica que el código Fortran es una colección de <em>unidades de programa</em> (ya sea todo en un archivo , o en archivos separados), donde cada <em>unidad de programa</em> es una de:</p>
<ul class="simple">
<li><p>programa principal</p></li>
<li><p>módulo o submódulo</p></li>
<li><p>función o subrutina</p></li>
</ul>
<p>Nota: También puede ser una unidad de programa de <em>bloques de datos</em>, que se utiliza para proporcionar valores iniciales para objetos de datos en <em>bloques comunes</em> con nombre, pero no recomendamos el uso de <em>bloques comunes</em> (utilice módulos en su lugar).</p>
</section>
<section id="lfortran-extension">
<h2 id="lfortran-extension">Extensión LFortran<a class="headerlink" href="#lfortran-extension" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Extendemos el lenguaje Fortran introduciendo un <em>alcance global</em>, que no es sola la lista de <em>unidades de programa</em> (como en F2800) sino que puede también incluir declaraciones, expresiones y declaraciones de uso. Definimos <em>alcance global</em> como una colección de los elementos siguientes:</p>
<ul class="simple">
<li><p>programa principal</p></li>
<li><p>módulo o submódulo</p></li>
<li><p>función o subrutina</p></li>
<li><p>declaración de uso</p></li>
<li><p>declaración</p></li>
<li><p>declaración</p></li>
<li><p>expresión</p></li>
</ul>
<p>Además, si una variable no está definida en una instrucción de asignación (como <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">5+3</span></code>), el tipo de variable se deduce del lado derecho (por ejemplo, <code class="docutils literal notranslate"><span class="pre">x</span></code> en <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">5+3</span></code>). <code class="docutils literal notranslate"><span class="pre">sería</span> <span class="pre">de</span> <span class="pre">tipo</span></code>integer<code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">y</span> </code>y<code class="docutils literal notranslate"><span class="pre">en</span></code>y = 5._dp<code class="docutils literal notranslate"><span class="pre">sería</span> <span class="pre">de</span> <span class="pre">tipo</span></code>real(dp)`). Esta regla solo se aplica en el nivel superior de <em>alcance global</em>. Los tipos deben especificarse completamente dentro de los programas, módulos, funciones y subrutinas principales, al igual que en F2008.</p>
<p>El <em>alcance global</em> tiene su propia tabla de símbolos. El programa principal y el módulo/submódulo no ven ningún símbolo de esta tabla de símbolos. Pero las funciones, subrutinas, declaraciones y expresiones en el nivel superior del <em>alcance global</em> usan y operan en esta tabla de símbolos.</p>
<p>El <em>alcance global</em> tiene los siguientes símbolos predefinidos en la tabla de símbolos:</p>
<ul class="simple">
<li><p>el conjunto estándar habitual de funciones de Fortran (como <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">sin</span></code>, <code class="docutils literal notranslate"><span class="pre">cos</span></code>, …)</p></li>
<li><p>el símbolo de doble precisión <code class="docutils literal notranslate"><span class="pre">dp</span></code>, por lo que se puede usar <code class="docutils literal notranslate"><span class="pre">5._dp</span></code> para doble precisión.</p></li>
</ul>
<p>Cada elemento del <em>alcance global</em> se interpreta de la siguiente manera: el programa principal se compila en un ejecutable con el mismo nombre y se ejecuta; se compilan y cargan módulos, funciones y subrutinas; use sentencia y declaración agrega esos símbolos con el tipo adecuado en la tabla de símbolos <em>alcance global</em>, pero no genera ningún código; la declaración se envuelve en una subrutina anónima sin argumentos, se compila, se carga y se ejecuta; expresión se envuelve en una función anónima sin argumentos que devuelven la expresión, compilada, cargada, ejecutada y el valor de retorno se devuelve al usuario.</p>
<p>El <em>alcance global</em> siempre se interpreta, elemento por elemento, según el párrafo anterior. Está destinado a permitir el uso interactivo, la experimentación y la escritura de scripts simples. El código en <em>alcance global</em> debe interpretarse usando <code class="docutils literal notranslate"><span class="pre">lfortran</span></code>. Para código más complejo (de producción), se recomienda convertirlo en módulos y programas (envolviendo sentencias sueltas en subrutinas o funciones y agregando declaraciones de tipo) y compilarlo con <code class="docutils literal notranslate"><span class="pre">lfortran</span></code> o cualquier otro compilador de Fortran.</p>
<p>Aquí algunos ejemplos de código válidos en <em>alcance global</em>:</p>
<section id="example-1">
<h3 id="example-1">Ejemplo 1<a class="headerlink" href="#example-1" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">a</span>
</pre></div>
</div>
</section>
<section id="example-2">
<h3 id="example-2">Ejemplo 2<a class="headerlink" href="#example-2" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>

<span class="k">subroutine </span><span class="n">p</span><span class="p">()</span>
<span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">a</span>
<span class="k">end subroutine</span>

<span class="k">call </span><span class="n">p</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="example-3">
<h3 id="example-3">Ejemplo 3<a class="headerlink" href="#example-3" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">module </span><span class="n">a</span>
<span class="k">implicit none</span>
<span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">i</span>
<span class="k">end module</span>

<span class="k">use </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="p">:</span><span class="w"> </span><span class="n">i</span>
<span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
</pre></div>
</div>
</section>
<section id="example-4">
<h3 id="example-4">Ejemplo 4<a class="headerlink" href="#example-4" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span>
<span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span>
<span class="k">call </span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="s2">"o-"</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="design-considerations">
<h2 id="design-considerations">Consideraciones de diseño<a class="headerlink" href="#design-considerations" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La extensión LFortran de Fortran se eligió de manera que se minimice el número de cambios. En particular, solo el nivel superior del <em>alcance global</em> ha relajado algunas de las reglas de Fortran (como hacer que la especificación de tipos sea opcional) para permitir un uso interactivo simple y rápido, pero dentro de las funciones, subrutinas, módulos o programas, esta relajación no se aplica.</p>
<p>El número de cambios se mantuvo al mínimo para que sea sencillo convertir el código en <em>alcance global</em> en código Fortran compatible con el estándar utilizando programas y módulos, de modo que pueda ser compilado por cualquier compilador de Fortran.</p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="../progress/" title="Estado del desarrollo de LFortran"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Estado del desarrollo de LFortran </span>
              </div>
            </a>
          
          
            <a href="../developer_tutorial/" title="Tutorial para desarrolladores"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Tutorial para desarrolladores </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2022 LFortran contributors.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>