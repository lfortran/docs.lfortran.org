
<!DOCTYPE html>

<html lang="bn">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Abstract Semantic Representation (ASR) &#8212; LFortran</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/ansi.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/translations.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../_static/lfortran-logo.svg"/>
    <link rel="index" title="ইনডেক্স" href="../../genindex/" />
    <link rel="search" title="অনুসন্ধান" href="../../search/" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=amber data-md-color-accent=orange>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#asr/asr" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../" title="LFortran"
           class="md-header-nav__button md-logo">
          
              <img src="../../_static/lfortran-logo.svg" height="26"
                   alt="LFortran logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">LFortran Documentation</span>
          <span class="md-header-nav__topic"> Abstract Semantic Representation (ASR) </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../search/" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/lfortran/lfortran" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LFortran
  </div>
</a>
          </div>
        </div>
      
      
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Versions</button>
    <div class="dropdown-content md-hero">
          <a title="English" href="/../en/">English</a>
      
          <a title="Bengali" href="/../bn/">Bengali</a>
      
          <a title="Czech" href="/../cs/">Czech</a>
      
          <a title="German" href="/../de/">German</a>
      
          <a title="Spanish" href="/../es/">Spanish</a>
      
          <a title="French" href="/../fr/">French</a>
      
          <a title="Japanese" href="/../ja/">Japanese</a>
      
          <a title="Dutch" href="/../nl/">Dutch</a>
      
          <a title="Polish" href="/../pl/">Polish</a>
      
          <a title="Portuguese" href="/../pt/">Portuguese</a>
      
          <a title="Russian" href="/../ru/">Russian</a>
      
          <a title="Chinese" href="/../zh_CN/">Chinese</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../../" class="md-tabs__link">LFortran</a></li>
            
            <li class="md-tabs__item"><a href="../../installation/" class="md-tabs__link">Getting started</a></li>
            
            <li class="md-tabs__item"><a href="../../progress/" class="md-tabs__link">LFortran Development Status</a></li>
            
            <li class="md-tabs__item"><a href="../../design/" class="md-tabs__link">Developers's Guide</a></li>
            
            <li class="md-tabs__item"><a href="../../intrinsics/array/" class="md-tabs__link">Intrinsics</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../" title="LFortran" class="md-nav__button md-logo">
      
        <img src="../../_static/lfortran-logo.svg" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../"
       title="LFortran">LFortran Documentation</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/lfortran/lfortran" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LFortran
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Getting started</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../installation/" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../language/" class="md-nav__link">Fortran Language</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../usage/" class="md-nav__link">LFortran User Guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">LFortran Development Status</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../progress/" class="md-nav__link">LFortran Development Status</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../progress/#topics" class="md-nav__link">Topics</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Developer's Guide</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../design/" class="md-nav__link">LFortran Design</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../developer_tutorial/" class="md-nav__link">Developer Tutorial</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../ast_and_asr/" class="md-nav__link">Difference between an AST and ASR</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../contributing/" class="md-nav__link">Contributing</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">LFortran Intrinsics</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../intrinsics/array/" class="md-nav__link">Array Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../intrinsics/bit/" class="md-nav__link">Bit Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../intrinsics/character/" class="md-nav__link">Character Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../intrinsics/kind-type/" class="md-nav__link">Kind Type Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../intrinsics/mathematical/" class="md-nav__link">Mathematical Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../intrinsics/numeric/" class="md-nav__link">Numeric Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../intrinsics/misc/" class="md-nav__link">Miscellaneous Intrinsic Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">LFortran ASR Nodes</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr_nodes/cast_kind_nodes/cast_kind/" class="md-nav__link">cast_kind</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr_nodes/expression_nodes/expression_nodes/" class="md-nav__link">ASR Expression Nodes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr_nodes/kinds_nodes/kinds/" class="md-nav__link">kinds</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr_nodes/statement_nodes/statement_nodes/" class="md-nav__link">ASR Statement Nodes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr_nodes/symbol_nodes/symbol_nodes/" class="md-nav__link">ASR Symbol Nodes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr_nodes/type_nodes/ttype/" class="md-nav__link">ttype</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../asr_nodes/omp_nodes/omp_nodes/" class="md-nav__link">ASR OpenMp Nodes</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#asr-asr--page-root" class="md-nav__link">Abstract Semantic Representation (ASR)</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#abstract-syntax-description-language-asdl" class="md-nav__link">Abstract Syntax Description Language (ASDL)</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#types" class="md-nav__link">Types</a>
        </li>
        <li class="md-nav__item"><a href="#constructors" class="md-nav__link">Constructors</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#symbol-type" class="md-nav__link">Symbol type</a>
        </li>
        <li class="md-nav__item"><a href="#abi-type" class="md-nav__link">ABI Type</a>
        </li>
        <li class="md-nav__item"><a href="#short-notes-on-asr-nodes" class="md-nav__link">Short notes on ASR nodes</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#stmt-nodes" class="md-nav__link">Stmt nodes</a>
        </li>
        <li class="md-nav__item"><a href="#expr-nodes" class="md-nav__link">Expr nodes</a>
        </li>
        <li class="md-nav__item"><a href="#ttype-nodes" class="md-nav__link">Ttype nodes</a>
        </li>
        <li class="md-nav__item"><a href="#string-format-kind" class="md-nav__link">String format kind</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="abstract-semantic-representation-asr">
<h1 id="asr-asr--page-root">Abstract Semantic Representation (ASR)<a class="headerlink" href="#asr-asr--page-root" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h1>
<p>The aim of ASR is to represent all semantics in a non-redundant way, and that
has all the semantic information available locally, so that the backend can
do a single pass over ASR and have all the information at hand to generate
code.</p>
<p>ASR is always semantically valid Fortran code. It is as far from the original
Fortran language code as possible (i.e. everything is explicitly figured out,
all semantic information gathered and readily available locally from each ASR
node), while ensuring no semantic information was lost (no lowering was
done), so one can still generate Fortran code from ASR that will be logically
equivalent to the original code.</p>
<p>ASR can be used to do Fortran-level transformations (such as optimizations).</p>
<section id="abstract-syntax-description-language-asdl">
<h2 id="abstract-syntax-description-language-asdl">Abstract Syntax Description Language (ASDL)<a class="headerlink" href="#abstract-syntax-description-language-asdl" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h2>
<p>Abstract Syntax Description Language describes the abstract syntax of the compiler
IRs and other tree-like data structures. IRs described with ASDL are converted
into an implementation automatically by tools. Tools generate the data structure
definitions for a target language, pickling functions, and other codes.</p>
<p>ASDL consists of three fundamental constructs: <em><strong>types, constructors</strong></em>, and
<em><strong>productions</strong></em>.</p>
<p>Let's take an example of a node from <a class="reference external" href="https://github.com/lfortran/lfortran/blob/main/src/libasr/ASR.asdl">ASR.asdl</a>:</p>
<div class="highlight-asdl notranslate"><div class="highlight"><pre><span></span>symbol
    = Program(symbol_table symtab, identifier name, identifier* dependencies, stmt* body)
    | Module(symbol_table symtab, identifier name, identifier* dependencies, bool loaded_from_mod, bool intrinsic)
    | Function(symbol_table symtab, identifier name, ttype function_signature, identifier* dependencies, expr* args, stmt* body, expr? return_var, access access, bool deterministic, bool side_effect_free, string? module_file)
</pre></div>
</div>
<section id="types">
<h3 id="types">Types<a class="headerlink" href="#types" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h3>
<p>The <strong>types</strong> are required to begin with a lowercase. ASDL's builtin
types are:</p>
<ul class="simple">
<li><p>identifier</p></li>
<li><p>int (signed integers of infinite precision)</p></li>
<li><p>string</p></li>
</ul>
<p>We extend these by:</p>
<ul class="simple">
<li><p>bool (.true. / .false.)</p></li>
<li><p>float (floating point number of infinite precision)</p></li>
<li><p>symbol_table (scoped Symbol Table implementation)</p></li>
<li><p>node (any ASR node)</p></li>
</ul>
<blockquote>
<div><p><em><strong>Note</strong></em>: symbol_table contains <code class="docutils literal notranslate"><span class="pre">identifier</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">symbol</span></code> mappings</p>
</div></blockquote>
<p>In the above example, <code class="docutils literal notranslate"><span class="pre">symbol_table</span></code>, <code class="docutils literal notranslate"><span class="pre">identifier</span></code>, <code class="docutils literal notranslate"><span class="pre">stmt</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code>, etc are types.</p>
</section>
<section id="constructors">
<h3 id="constructors">Constructors<a class="headerlink" href="#constructors" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h3>
<p>The <strong>constructors</strong> names must begin with an upper case.
In above example has three constructors, <code class="docutils literal notranslate"><span class="pre">Program</span></code>, <code class="docutils literal notranslate"><span class="pre">Module</span></code>, and <code class="docutils literal notranslate"><span class="pre">Function</span></code>,
where the Program constructor has four fields whose values are of type <code class="docutils literal notranslate"><span class="pre">symbol_table</span></code>,
<code class="docutils literal notranslate"><span class="pre">identifier</span></code>, <code class="docutils literal notranslate"><span class="pre">identifier*</span></code>, and <code class="docutils literal notranslate"><span class="pre">stmt*</span></code>. These are, basically, subtrees.</p>
</section>
</section>
<section id="symbol-type">
<h2 id="symbol-type">Symbol type<a class="headerlink" href="#symbol-type" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h2>
<p>Each symbol has either <code class="docutils literal notranslate"><span class="pre">symtab</span></code> (local symbol table) or <code class="docutils literal notranslate"><span class="pre">parent_symtab</span></code>
(where this symbol is stored). One can get to parent_symtab via symtab, so
only one is present.</p>
<p>Each symbol has a <code class="docutils literal notranslate"><span class="pre">name</span></code> for easy lookup of the name of the symbol when only
having a pointer to it.</p>
<p><code class="docutils literal notranslate"><span class="pre">abi=Source</span></code> means the symbol's implementation is included (full ASR),
otherwise, it is external (interface ASR, such as procedure interface).</p>
<p><code class="docutils literal notranslate"><span class="pre">SubroutineCall</span></code>/<code class="docutils literal notranslate"><span class="pre">FunctionCall</span></code> stores the actual final resolved subroutine or
function (<code class="docutils literal notranslate"><span class="pre">name</span></code> member). They also store the original symbol
(<code class="docutils literal notranslate"><span class="pre">original_name</span></code>), which can be one of: <code class="docutils literal notranslate"><span class="pre">null</span></code>, <code class="docutils literal notranslate"><span class="pre">GenericProcedure</span></code> or
<code class="docutils literal notranslate"><span class="pre">ExternalSymbol</span></code>.</p>
<p>When a module is compiled, it is parsed into full ASR, an object file is
produced, and the full ASR (abi=Source, "body" is non-empty) is transformed into
interface ASR (abi=LFortran, "body" is empty). Both interface and full ASR
are saved into the mod file.</p>
<p>When a module is used, it is first looked up in the symbol table (as either
full or interface ASR) and used if it is present. Otherwise, a mod file is
found on the disk, loaded (as either full or interface ASR for LFortran's
mod file, depending on LFortran's compiler options; or for GFortran's mod
file, the corresponding interface ASR is constructed with abi=GFortran) and
used. After the ASR is loaded, the symbols that are used are represented as
ExternalSymbols in the current scope of the symbol table.</p>
<p>ExternalSymbol represents symbols that cannot be looked up in the current
scoped symbol table. As an example, if a variable is defined in a module,
but used in a nested subroutine, that is not an external symbol
because it can be resolved in the current symbol table (nested subroutine)
by following the parents. However, if a symbol is used from a different
module, then it is an external symbol because the usual symbol resolution by
going to the parents will not find the definition. The <code class="docutils literal notranslate"><span class="pre">module_name</span></code> member
is the name of the module the symbol is in, and the <code class="docutils literal notranslate"><span class="pre">scope_names</span></code> is a list of
names if the symbol is in a nested symbol table. For example, if it is a
local variable in a function <code class="docutils literal notranslate"><span class="pre">f</span></code> that is nested in function <code class="docutils literal notranslate"><span class="pre">g</span></code>, then
<code class="docutils literal notranslate"><span class="pre">scope_names=[g,</span> <span class="pre">f]</span></code>.</p>
<p>REPL: each cell is parsed into full ASR, compiled + executed, and the full ASR
is transformed into interface ASR (abi=LFortran) and kept in the symbol
table. A new cell starts with an empty symbol table, whose parent symbol
table is the previous cell. That allows function/declaration shadowing.</p>
</section>
<section id="abi-type">
<h2 id="abi-type">ABI Type<a class="headerlink" href="#abi-type" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h2>
<div class="highlight-asdl notranslate"><div class="highlight"><pre><span></span>abi                   -- External     ABI
    = Source          --   No         Unspecified
    | LFortranModule  --   Yes        LFortran
    | GFortranModule  --   Yes        GFortran
    | BindC           --   Yes        C
    | BindPython      --   Yes        Python
    | BindJS          --   Yes        Javascript
    | Interactive     --   Yes        Unspecified
    | Intrinsic       --   Yes        Unspecified
</pre></div>
</div>
<ul class="simple">
<li><p><strong>External Yes</strong>: the symbol's implementation is not part of ASR; the
symbol is just an interface (e.g., subroutine/function interface, or variable
marked as external, not allocated by this ASR).</p></li>
<li><p><strong>External No</strong>:  the symbol's implementation is part of ASR (e.g.,
subroutine/function body is included, variables must be allocated).</p></li>
<li><p><strong>abi=Source</strong>: The symbol's implementation is included in ASR, and the backend is
free to use any ABI it wants (it might also decide to inline or eliminate
the code in optimizations).</p></li>
<li><p><strong>abi=LFortranModule/GFortranModule/BindC</strong>: the symbol's implementation is
stored as machine code in some object file that must be linked in. It
uses the specified ABI (one of the LFortran modules, GFortran module, or C ABI).
An interface that uses <code class="docutils literal notranslate"><span class="pre">iso_c_binding</span></code> and <code class="docutils literal notranslate"><span class="pre">bind(c)</span></code> is represented using
abi=BindC.</p></li>
<li><p><strong>abi=BindPython</strong>: the symbol's implementation is
stored in text format in the user source code file.
The symbol is executed using the CPython interpreter.
LPython manages the conversion of arguments to be passed to such symbols
and also converts the return values from such symbols.</p></li>
<li><p><strong>abi=BindJS</strong>: the symbol's implementation is
available with Javascript.
This abi type is to be mainly used with the WASM Backend.</p></li>
<li><p><strong>abi=Interactive</strong>: the symbol's implementation has been provided by the
previous REPL execution (e.g., if LLVM backend is used for the interactive
mode, the previous execution generated machine code for this symbol's
implementation that was loaded into memory). Note: this option might be
converted/eliminated to just use LFortran ABI in the future.</p></li>
<li><p><strong>abi=Intrinsic</strong>: the symbol's implementation is implicitly provided by the
language itself as an intrinsic function. That means the backend is free to
implement it in any way it wants. The function does not have a body, it is
just an interface.</p></li>
</ul>
</section>
<section id="short-notes-on-asr-nodes">
<h2 id="short-notes-on-asr-nodes">Short notes on ASR nodes<a class="headerlink" href="#short-notes-on-asr-nodes" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h2>
<section id="stmt-nodes">
<h3 id="stmt-nodes">Stmt nodes<a class="headerlink" href="#stmt-nodes" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>ExplicitDeallocate</strong>: It deallocates if allocated otherwise throws a runtime error.</p></li>
<li><p><strong>ImplicitDeallocate</strong>: It  deallocates if allocated otherwise does nothing.</p></li>
<li><p><strong>GoTo</strong>: It points to a GoToTarget with the corresponding target_id within
the same procedure. We currently use <code class="docutils literal notranslate"><span class="pre">int</span></code> IDs to link GoTo with
GoToTarget to avoid issues with serialization.</p></li>
<li><p><strong>GoToTarget</strong>: An empty statement, a target of zero or more GoTo statements
the <code class="docutils literal notranslate"><span class="pre">id</span></code> is only unique within a procedure.</p></li>
</ol>
</section>
<section id="expr-nodes">
<h3 id="expr-nodes">Expr nodes<a class="headerlink" href="#expr-nodes" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h3>
<ol class="arabic">
<li><p><strong>Cast</strong>: It changes the value (the bits) of the <code class="docutils literal notranslate"><span class="pre">arg</span></code>.</p></li>
<li><p><strong>ArrayPhysicalCast</strong>: This ArrayPhysicalCast we only change the physical type,
the logical type does not change</p>
<blockquote>
<div><p>Note: the "new" physical type here will also be part of the "type" member</p>
</div></blockquote>
<p>This allows to represent any combination, but we'll only support a few; at least we need:
Maybe it's easier to add an enumeration here:</p>
<ul class="simple">
<li><p>Descriptor -&gt; Pointer</p></li>
<li><p>Pointer -&gt; Descriptor</p></li>
<li><p>CompileTimeFixedSizeArray -&gt; Pointer</p></li>
<li><p>CompileTimeFixedSizeArray -&gt; Descriptor</p></li>
<li><p>Descriptor -&gt; NumPy</p></li>
<li><p>NumPy -&gt; Descriptor</p></li>
<li><p>ISODescriptor -&gt; Descriptor</p></li>
<li><p>Descriptor -&gt; ISODescriptor</p></li>
</ul>
</li>
</ol>
</section>
<section id="ttype-nodes">
<h3 id="ttype-nodes">Ttype nodes<a class="headerlink" href="#ttype-nodes" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h3>
<div class="highlight-asdl notranslate"><div class="highlight"><pre><span></span>ttype = Integer(int kind) | UnsignedInteger(int kind) | Real(int kind) | ...
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">len</span></code></strong> in Character:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(&gt;=0\)</span> ... the length of the string, known at compile time</p></li>
<li><p><span class="math notranslate nohighlight">\(-1\)</span> ... character( * ), i.e., inferred at runtime</p></li>
<li><p><span class="math notranslate nohighlight">\(-2\)</span> ... character(:), allocatable (possibly we might use -1 for that also)</p></li>
<li><p><span class="math notranslate nohighlight">\(-3\)</span> ... character(n+3), i.e., a runtime expression stored in <code class="docutils literal notranslate"><span class="pre">len_expr</span></code></p></li>
</ul>
<p><strong><code class="docutils literal notranslate"><span class="pre">kind</span></code></strong>: The <code class="docutils literal notranslate"><span class="pre">kind</span></code> member selects the kind of a given type. We currently
support the following:</p>
<ul class="simple">
<li><p>Integer kinds: 1 (i8), 2 (i16), 4 (i32), 8 (i64)</p></li>
<li><p>Real kinds: 4 (f32), 8 (f64)</p></li>
<li><p>Complex kinds: 4 (c32), 8 (c64)</p></li>
<li><p>Character kinds: 1 (utf8 string)</p></li>
<li><p>Logical kinds: 1, 2, 4: (boolean represented by 1, 2, 4 bytes; the default
kind is 4, just like the default integer kind, consistent with Python
and Fortran: in Python, "Booleans in Python are implemented as a subclass
of integers"; in Fortran the "default logical kind has the same storage
size as the default integer"; we currently use kind=4 as default
integer, so we also use kind=4 for the default logical.)</p></li>
</ul>
</section>
<section id="string-format-kind">
<h3 id="string-format-kind">String format kind<a class="headerlink" href="#string-format-kind" title="এই শিরোনামের পার্মালিঙ্ক">¶</a></h3>
<div class="highlight-asdl notranslate"><div class="highlight"><pre><span></span>string_format_kind
    = FormatFortran        -- "(f8.3,i4.2)", a, b
    | FormatC              -- "%f: %d", a, b
    | FormatPythonPercent  -- "%f: %d" % (a, b)
    | FormatPythonFString  -- f"{a}: {b}"
    | FormatPythonFormat   -- "{}: {}".format(a, b)
</pre></div>
</div>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2022 LFortran contributors.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>